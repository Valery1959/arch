#!/bin/bash

run()
{
  echo "Run '$@'"; "$@"; [ $? -ne 0 ] && { echo "Cannot run '$@'";  exit 1; }
}

host="$1"; [ -z "$host" ] && { echo "You should pass hostname as first arg"; exit -1; }
akey="$2"; [ -z "$akey" ] && akey="$HOME/.ssh/id_ed25519.pub"

[ ! -f "$akey" ] && { echo "File $akey does not exist"; exit -1; }

run ssh-copy-id -i "$akey" $host

exit 0

